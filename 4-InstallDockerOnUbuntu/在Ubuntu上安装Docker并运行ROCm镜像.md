

# åœ¨ Ubuntu ä¸Šå®‰è£… Docker å¹¶è¿è¡Œ ROCm é•œåƒ

## ğŸ§© å¼€å§‹å‰ä½ éœ€è¦ç¡®ä¿ï¼š

* âœ… æ“ä½œç³»ç»Ÿä¸º **Ubuntu 24.04.2**
* âœ… å†…æ ¸ç‰ˆæœ¬ä¸º **6.11**
* âœ… å·²æˆåŠŸå®‰è£… **ROCm**
* âœ… `rocm-smi` å‘½ä»¤å¯æ­£å¸¸è¿è¡Œï¼Œèƒ½æ£€æµ‹åˆ° GPU çŠ¶æ€
* âœ… æ‹¥æœ‰ **sudo æƒé™**
* âœ… èƒ½å¤Ÿè¿æ¥åˆ° `docker.io`ï¼ˆDocker Hub ç½‘ç»œï¼‰
* âœ… å½“å‰ç³»ç»Ÿä¸­ **æœªå®‰è£… Docker** æˆ–å·²å®Œå…¨å¸è½½æ—§ç‰ˆæœ¬

---

## ğŸ¯ æœ¬èŠ‚å®Œæˆåä½ å°†èƒ½å¤Ÿï¼š

* æˆåŠŸå®‰è£… Docker å¹¶å®ŒæˆåŸºç¡€é…ç½®
* æ‹‰å–å¹¶è¿è¡Œ ROCm å®˜æ–¹å¼€å‘é•œåƒ
* åœ¨å®¹å™¨ä¸­è¿è¡Œ `rocm-smi` ç­‰ ROCm å‘½ä»¤

---

## æ­¥éª¤ 1ï¼šå®‰è£… Docker

Docker å®˜æ–¹æä¾›äº†ä¸€é”®å®‰è£…è„šæœ¬ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®Œæˆå®‰è£…ï¼š

```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
```

> å¦‚éœ€é¢„æ¼”ï¼ˆä¸å®é™…å®‰è£…ï¼‰ï¼Œå¯åŠ ä¸Š `--dry-run`ï¼š
>
> ```bash
> sudo sh ./get-docker.sh --dry-run
> ```

è¯¦ç»†å‚è€ƒï¼š[Docker å®˜æ–¹å®‰è£…æ–‡æ¡£](https://docs.docker.com/engine/install/ubuntu/)

---

## æ­¥éª¤ 2ï¼šå°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç”¨æˆ·ç»„ï¼ˆå¯é€‰ï¼‰

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`docker` å‘½ä»¤éœ€è¦ `sudo`ã€‚å¦‚æœå¸Œæœ›å½“å‰ç”¨æˆ·èƒ½ç›´æ¥è¿è¡Œ Docker å‘½ä»¤ï¼Œå¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

```bash
sudo groupadd docker        # å¦‚æœ docker ç»„å·²å­˜åœ¨ä¼šæç¤ºå·²å­˜åœ¨ï¼Œæ— éœ€å¤„ç†
sudo usermod -aG docker $USER
newgrp docker                # åˆ·æ–°ç”¨æˆ·ç»„ï¼ˆå½“å‰ç»ˆç«¯ä¼šè¯ç”Ÿæ•ˆï¼‰
```

> æ³¨ï¼šæ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤åï¼Œå»ºè®® **é‡æ–°ç™»å½•ç³»ç»Ÿ** æˆ–é‡æ–°æ‰“å¼€ç»ˆç«¯ã€‚

---

## æ­¥éª¤ 3ï¼šéªŒè¯ Docker æ˜¯å¦å®‰è£…æˆåŠŸ

```bash
docker run hello-world
```

è‹¥è¾“å‡ºç±»ä¼¼ â€œHello from Docker!â€ å³è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚

---

## æ­¥éª¤ 4ï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½® Docker å¼€æœºè‡ªåŠ¨å¯åŠ¨

```bash
sudo systemctl enable docker.service
sudo systemctl enable containerd.service
```

---

## æ­¥éª¤ 5ï¼šæ‹‰å–å¹¶è¿è¡Œ ROCm å¼€å‘æµ‹è¯•é•œåƒ

ROCm å›¢é˜Ÿç»´æŠ¤äº†ä¸€ä¸ªä¸“ç”¨äºå¼€å‘å’Œæµ‹è¯•çš„å®˜æ–¹å®¹å™¨é•œåƒã€‚

### æ‹‰å–é•œåƒï¼š

```bash
sudo docker pull rocm/rocm-terminal
```

### è¿è¡Œå®¹å™¨ï¼š

```bash
sudo docker run -it \
  --device=/dev/kfd \
  --device=/dev/dri \
  --security-opt seccomp=unconfined \
  --group-add video \
  rocm/rocm-terminal
```

---

## æ­¥éª¤ 6ï¼šéªŒè¯å®¹å™¨å†… ROCm æ˜¯å¦å¯ç”¨

è¿›å…¥å®¹å™¨åï¼Œæ‰§è¡Œï¼š

```bash
rocm-smi
```

å¦‚æœèƒ½çœ‹åˆ° GPU åˆ—è¡¨ï¼ˆå¦‚ gfx1100ã€gfx1036 ç­‰ï¼‰åŠå…¶çŠ¶æ€ï¼Œè¯´æ˜ ROCm ç¯å¢ƒå·²åœ¨å®¹å™¨ä¸­æˆåŠŸåŠ è½½ã€‚

---

## ğŸ”š æ€»ç»“

ä½ ç°åœ¨å·²ç»å®Œæˆï¼š

* Docker å®‰è£…ä¸é…ç½®
* ROCm å¼€å‘å®¹å™¨çš„å¯åŠ¨ä¸éªŒè¯


